(function(e){e.widget("mobile.actionbar",e.mobile.widget,{options:{initSelector:":jqmData(role='actionbar')",backButtonText:e.mobile.page.prototype.options.backBtnText,disableTapToggle:!0},_init:function(){},_create:function(){this.actionBarArea=e(this.element),this.actionOverflow=this.tabOverflow=0;var t=this,i=t.options,a=(e(document.createElement("div")),e(document.createElement("div"))),n=this.actionBarArea.children(":jqmData(role='action'), :jqmData(role='tab')"),r=n.filter(":jqmData(role='action')"),o=n.filter(":jqmData(role='tab')"),s=this.actionBarArea.children(":jqmData(role='back')").first();this.tabOverflow=this.actionBarArea.children(":jqmData(role='tab-overflow')"),this.actionOverflow=this.actionBarArea.children(":jqmData(role='action-overflow')"),e("[data-role=footer]").fixedtoolbar({tapToggle:!i.disableTapToggle}),this.actionBarArea.addClass("action-bar-area action-bar"),a.addClass("action-bar-actions"),e(".ui-input-text").focus(function(){e(".ui-footer").addClass("bb10-landscape-hidden")}).blur(function(){e(".ui-footer").removeClass("bb10-landscape-hidden")}),s.length&&!o.length?this._createBackButton(s,this.actionBarArea):(s.remove(),a.addClass("action-bar-actions-full-width"));for(var l=0;o.length>l;l++)a.append(this._createTabItem(o.eq(l)));for(l=0;r.length>l;l++)a.append(this._createActionItem(r.eq(l)));if(this.actionOverflow.length>0&&this.actionOverflow.addClass("action-bar-overflow actions").appendTo(a).bind("vclick",function(){e(t.element).trigger("actionOverflowPressed")}),this.tabOverflow.length>0){var d=this.tabOverflow.children("p, img").length>0?"":"noContent";this.tabOverflow.addClass("action-bar-overflow tabs action-bar-tab-item "+d).prependTo(a).bind("vclick",function(){e(t.element).trigger("tabOverflowPressed")})}this.actionBarArea.append(a);var c,u,p;o.not("[data-overflow]").length>0?(u=this.actionBarArea.find(".action-bar-tab-item").not(".tabs"),p="action-bar-grid-"+((r.length||this.actionOverflow.length)>0?"tabAction":"tabs")):(u=this.actionBarArea.find(".action-bar-action-item"),p="action-bar-grid-actions"),c=u.length,p+="-"+(c>5?"e":String.fromCharCode(96+c)),u.addClass(p),e(".action-bar-action-item, .action-bar-tab-item").bind("vmousedown",function(t){e(t.delegateTarget).addClass("pressed")}).bind("vmouseup",function(t){e(t.delegateTarget).removeClass("pressed")}),e(document).bind("actionbarIn",function(){t._animateIn(s,a)}).bind("actionbarOut",function(){t._animateOut(s,a)})},refresh:function(){},destroy:function(){e(this.overflowActionMenu).remove(),e(this.overflowTabMenu).remove()},_createOverFlowItem:function(e){e.addClass("menuItem light-text-fade");var t=e.children("p").first().html();return e.children("p").remove(),e.append(t),e},_createActionItem:function(e){return e=this._createBarItem(e),e.addClass("action-bar-action-item"),e},_createTabItem:function(e){return e=this._createBarItem(e),e.addClass("action-bar-tab-item"),e},_createBarItem:function(t){var i=t.find("p").first();return t.find("img").first().addClass("action-bar-action-item-image").appendTo(t),i&&e(document.createElement("div")).addClass("action-bar-action-item-text").html(i).appendTo(t),t},_createBackButton:function(t,i){var a=e(document.createElement("div"));a.addClass("action-bar-back-text").html("<p>"+this.options.backButtonText+"</p>"),t.addClass("action-bar-back").append(a).bind("vmousedown",function(t){return e(t.delegateTarget).addClass("pressed"),window.history.back(),!1}).bind("vmouseup",function(t){e(t.delegateTarget).removeClass("pressed")}).appendTo(i)},_createOverflowButton:function(){return e(document.createElement("div")).addClass("action-bar-overflow")},_animateIn:function(e,t){e&&e.removeClass("action-bar-back-offset-right action-bar-back-offset-left"),t.removeClass("action-bar-actions-offset-right action-bar-actions-offset-left")},_animateOut:function(e,t,i,a){e&&e.addClass("action-bar-back-offset-right"),t.addClass("action-bar-actions-offset-right"),a&&t.on("webkitTransitionEnd",function n(){t.off("webkitTransitionEnd",n),a()})},_animateBelow:function(e,t){e&&e.addClass("action-bar-back-offset-left"),t.addClass("action-bar-actions-offset-left")}}),e(document).bind("pagecreate create",function(t){e.mobile.actionbar.prototype.enhanceWithin(t.target)})})(jQuery),function(e){e.widget("mobile.activityindicator",e.mobile.widget,{options:{initSelector:":jqmData(role='bb-activity-indicator')",size:"medium",theme:"c",speed:"2s"},_create:function(){var t=this.element.attr("data-theme"),i=this.element.attr("data-size");this.options.size=void 0!==i?i:this.options.size,this.options.theme=void 0!==t?t:this.options.theme,this.swirl=e(document.createElement("div")).addClass("bb-activity-swirl bb-activity-"+this.options.size),this.element.append(this.swirl).addClass("bb-activity bb-activity-bg-"+this.options.theme+" bb-activity-"+this.options.size)},display:function(e){e?this.element.removeClass("bb-activity-hidden"):this.element.addClass("bb-activity-hidden")},speed:function(e){this.swirl.css("-webkit-animation-duration",e)}}),e(document).bind("pagecreate create",function(t){e.mobile.activityindicator.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.applicationmenu",e.mobile.widget,{options:{initSelector:":jqmData(role='applicationmenu')",maxItems:5},_init:function(){},_create:function(){this.actionsArea=this.element,this.actionsArea.parent(".ui-panel-inner").addClass("ui-panel-inner-application-menu");for(var t=this,i=(t.options,e(document.createElement("div")),this.actionsArea.children(":jqmData(role='action'), :jqmData(role='SettingsActionItem')")),a=t.options.maxItems<i.length?t.options.maxItems:i.length,n=0;a>n;n++)this.actionsArea.append(this._createActionItem(i.eq(n)));1===a&&this.actionsArea.children(":jqmData(role='SettingsActionItem')").addClass("application-menu-item-settings"),this.actionsArea.addClass("application-menu"),e(".application-menu-item").bind("vmousedown",function(t){e(t.delegateTarget).children(".application-menu-item-pressed-indicator").addClass("pressed")}).bind("vmouseup",function(t){e(t.delegateTarget).children(".application-menu-item-pressed-indicator").removeClass("pressed")})},refresh:function(){},destroy:function(){},_createActionItem:function(t){var i=t.find("p").first();return t.find("img").first().addClass("application-menu-item-image").appendTo(t),i&&e(document.createElement("div")).addClass("application-menu-item-text").html(i).appendTo(t),e(document.createElement("div")).addClass("application-menu-item-pressed-indicator").prependTo(t),t.addClass("application-menu-item visible"),t}}),e(document).bind("pagecreate create",function(t){e.mobile.applicationmenu.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.buttonGroup",e.mobile.widget,{options:{initSelector:':jqmData(role="controlgroup"):jqmData(type="horizontal")'},_create:function(){this.element.addClass("bb-buttongroup"),this.controlWrapper=this.element.children().addClass("bb-buttongroup-controls");var t=this.controlWrapper.children(),i=t.length,a=i%3;if(i>=3&&this.controlWrapper.addClass("bb-buttongroup-stacked"),0===a)this.controlWrapper.addClass("ui-grid-b");else if(1===i)this.controlWrapper.addClass("ui-grid-solo");else if(2===i||4===i)this.controlWrapper.addClass("ui-grid-a");else{this.controlWrapper.addClass("ui-grid-b"),this.controlWrapperExtra=e(document.createElement("div")).addClass("bb-buttongroup-controls-extra ui-controlgroup-controls"),this.element.append(this.controlWrapperExtra);var n=t.slice(i-a,t.length);this.controlWrapperExtra.append(n),2===n.length?this.controlWrapperExtra.addClass("ui-grid-a"):1===n.length&&this.controlWrapperExtra.addClass("ui-grid-solo")}i>3&&(t.eq(0).removeClass("ui-corner-left").addClass("ui-corner-tl").children().removeClass("ui-corner-left").addClass("ui-corner-tl"),t.eq(i-1).removeClass("ui-corner-right").addClass("ui-corner-br").children().removeClass("ui-corner-right").addClass("ui-corner-br"),4===i?(t.eq(1).addClass("ui-corner-tr").children().addClass("ui-corner-tr"),t.eq(2).addClass("ui-corner-").css("margin-top","-2px").children().addClass("ui-corner-bl")):(t.eq(2).addClass("ui-corner-tr").children().addClass("ui-corner-tr"),0===a&&(a=3),t.eq(i-a).addClass("ui-corner-bl").children().addClass("ui-corner-bl")))}}),e(document).bind("pageinit create",function(t){e.mobile.buttonGroup.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.dropdown",e.mobile.widget,{options:{initSelector:""},_init:function(){},_create:function(){var t=this,i=e(this.element).parent(),a=e('<div data-role="collapsible" data-content-theme='+e.mobile.getInheritedTheme(i,"c")+' data-collapsed="true" data-iconpos="right">'),n=e(this.element),r=e('<ul data-role="listview"></ul>').appendTo(a);this.header=e("<h1></h1>").appendTo(a),n.find("option").each(function(i,a){var n=e(document.createElement("li")).text(e(a).text());"selected"===e(a).attr("selected")&&(t._setHeader(e(a).text()),n.addClass("checked")),r.append(n)}),n.css("display","none"),e("<div>").attr("data-enhance","false").wrap(n),i.after(a),a.parent().trigger("create"),i.remove(),n.remove(),setTimeout(function(){n.appendTo(a)},0),r.bind("vclick",function(i){var r=e(i.target);t._setHeader(r.text()),e(".checked").removeClass("checked"),r.addClass("checked"),n.prop("value",n.find('option:contains("'+r.text()+'")').attr("value")),n.trigger("change"),a.trigger("collapse")})},_setHeader:function(e){var t=this.header.find(".ui-btn-text"),i=t.find(".ui-collapsible-heading-status");0===t.length?this.header.text(e):t.text(e).append(i)},refresh:function(){}}),e(document).unbind("selectmenubeforecreate"),e(document).bind("selectmenubeforecreate",function(t){e(t.target).dropdown()})}(jQuery),function(e){e.widget("mobile.gridview",e.mobile.widget,{options:{initSelector:":jqmData(role='gridview')",margin:.78125},_create:function(){var e=this;e.element.addClass(function(e,t){return t+" ui-gridview "}),e.refresh(!0)},_getChildrenByTagName:function(t,i,a){var n=[],r={};for(r[i]=r[a]=!0,t=t.firstChild;t;)r[t.nodeName]&&n.push(t),t=t.nextSibling;return e(n)},refresh:function(){function t(e){return l*e+r.margin*(e+1)+"%"}this.parentPage=this.element.closest(".ui-page");for(var i,a,n=this,r=n.options,o=this.element,s=this._getChildrenByTagName(o[0],"div","DIV"),l=(window.innerWidth||e(window).width(),0),d={},c=0,u=s.length;u>c;c++){if(i=s.eq(c),a="ui-grid-li","list-divider"===i.jqmData("role"))a+=" ui-li ui-li-divider ui-bar-b",i.attr("role","heading");else{var p=this._getChildrenByTagName(i[0],"div","DIV");l=100/p.length-r.margin-r.margin/p.length,p.find("p").addClass("ui-grid-item-details").css("width",l+"%").css("left",t).end().find("img").css("width",l+"%")}d[a]||(d[a]=[]),d[a].push(i[0])}for(a in d)e(d[a]).addClass(a).children(".ui-btn-inner").addClass(a);o.find("h1, h2, h3, h4, h5, h6").addClass("ui-li-heading"),o.find("a").removeClass("ui-link").addClass("ui-link-inherit")}}),e(document).bind("pagecreate create",function(t){e.mobile.gridview.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.inputValidator",e.mobile.widget,{options:{initSelector:'input[type="text"]:jqmData(role="bb-inputvalidator"), input[type="search"]:jqmData(role="bb-inputvalidator")'},_create:function(){var t=this;this.element.addClass("bb-text-validated"),this.wrapper=e(document.createElement("div")).addClass("bb-text-validator");var i=e(this.element).parent("div.ui-input-search, div.ui-input-text");0!==i.length?(i.addClass("bb-text-validated"),this.wrapper.insertBefore(i).append(i)):this.wrapper.insertBefore(this.element).append(this.element),this.icon=e(document.createElement("div")).addClass("bb-validation-icon").appendTo(this.wrapper),this._validate(e(this.element)),e(".bb-text-validated").bind("focus keyup blur",function(i){t._validate(e(i.target))})},_validate:function(e){var t=RegExp(e.attr("pattern")),i=e.parent("div.ui-input-search, div.ui-input-text"),a=e.add(i);if(void 0===e.attr("required")){if(""===e.val()&&!e.is(":focus"))return a.addClass("bb-text-empty").removeClass("bb-text-valid").removeClass("bb-text-invalid"),void 0;e.hasClass("bb-text-empty")&&!e.val()&&e.is(":focus")&&a.removeClass("bb-text-empty")}t.test(e.val())?a.addClass("bb-text-valid").removeClass("bb-text-invalid"):a.removeClass("bb-text-valid").addClass("bb-text-invalid")}}),e(document).bind("pagecreate create",function(t){e.mobile.inputValidator.prototype.enhanceWithin(t.target)})}(jQuery),function(e){e.widget("mobile.progressbar",e.mobile.widget,{options:{initSelector:"progress",color:"dark",highlightColor:"#00BC9F",accentColor:"rgb(-120, 68, 39)"},_create:function(){this.progress=this.element.css("display","none"),this.outerElement=e(document.createElement("div")).attr("class","bb-progress").insertBefore(this.progress).append(this.progress),this.outer=e(document.createElement("div")).attr("class","outer bb-progress-outer-"+this.options.color+" bb-progress-outer-idle-background-"+this.options.color).appendTo(this.outerElement),this.fill=e(document.createElement("div")).attr("class","bb-progress-fill bb10Highlight").appendTo(this.outer),this.inner=e(document.createElement("div")).attr("class","inner").appendTo(this.outer),this.outerElement.maxValue=this.progress.attr("max")?parseInt(this.progress.attr("max"),10):0,this.outerElement.value=this.progress.attr("value")?parseInt(this.progress.attr("value"),10):0,this.setValue(this.outerElement.value)},pause:function(e){var t=void 0!==e?e:!0;t?this.fill.addClass("paused"):this.fill.removeClass("paused")},setError:function(e){var t=void 0!==e?e:!0;t?this.fill.addClass("error"):this.fill.removeClass("error")},setValue:function(e){var t=0;void 0===e||0>e||e>this.outerElement.maxValue||(this.outerElement.value=e,this.value=e,e>=this.outerElement.maxValue?(t=100,this.fill.addClass("completed").removeClass("active paused error")):0===e?this.outer.attr("class","outer bb-progress-outer-"+this.options.color+" bb-progress-outer-idle-background-"+this.options.color):(this.outer.attr("class","outer bb-progress-outer-"+this.options.color),this.fill.attr("class","bb-progress-fill bb10Highlight").css("background",""),this.fill.addClass("active").removeClass("completed paused error"),t=100*(this.outerElement.value/parseInt(this.outerElement.maxValue,10))),this.fill.css("width",t+"%"))}}),e(document).bind("pagecreate create",function(t){e.mobile.progressbar.prototype.enhanceWithin(t.target)})}(jQuery);